{"version":3,"file":"index-legacy-tkRIw7dn.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * Ocean Adventure - Main Game Entry Point\n *\n * This is a placeholder implementation showing the basic structure\n * for the 3D underwater platform game. The actual game engine\n * implementation will be developed following the Copilot plan.\n */\n\nimport * as THREE from 'three'\n\n// Game configuration\nconst CONFIG = {\n  targetFPS: 60,\n  mobileFPS: 30,\n  canvasId: 'gameCanvas',\n  loadingId: 'loading',\n  uiId: 'ui',\n}\n\nclass OceanAdventure {\n  constructor() {\n    this.scene = null\n    this.camera = null\n    this.renderer = null\n    this.canvas = null\n    this.isLoaded = false\n    this.isMobile = this.detectMobile()\n\n    // Game state\n    this.starCount = 0\n    this.levelNumber = 1\n\n    console.log('üåä Ocean Adventure - Initializing...')\n  }\n\n  async initialize() {\n    try {\n      this.setupCanvas()\n      this.setupRenderer()\n      this.setupScene()\n      this.setupCamera()\n      this.setupLights()\n      this.setupEventListeners()\n\n      // Hide loading screen and show UI\n      this.hideLoading()\n      this.showUI()\n\n      // Start game loop\n      this.startGameLoop()\n\n      this.isLoaded = true\n      console.log('üéÆ Ocean Adventure - Ready to play!')\n    } catch (error) {\n      console.error('‚ùå Failed to initialize game:', error)\n    }\n  }\n\n  setupCanvas() {\n    this.canvas = document.getElementById(CONFIG.canvasId)\n    if (!this.canvas) {\n      throw new Error('Game canvas not found')\n    }\n  }\n\n  setupRenderer() {\n    this.renderer = new THREE.WebGLRenderer({\n      canvas: this.canvas,\n      antialias: !this.isMobile, // Disable antialiasing on mobile for performance\n      alpha: false,\n    })\n\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n    this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\n    this.renderer.setClearColor(0x001122, 1) // Deep ocean blue\n\n    // Enable shadows for better visual quality\n    this.renderer.shadowMap.enabled = true\n    this.renderer.shadowMap.type = THREE.PCFSoftShadowMap\n  }\n\n  setupScene() {\n    this.scene = new THREE.Scene()\n\n    // Add basic underwater environment\n    this.createUnderwaterEnvironment()\n    this.createPlayer()\n    this.createSampleStars()\n  }\n\n  setupCamera() {\n    this.camera = new THREE.PerspectiveCamera(\n      75, // Field of view\n      window.innerWidth / window.innerHeight, // Aspect ratio\n      0.1, // Near clipping plane\n      1000 // Far clipping plane\n    )\n\n    // Position camera behind and above the player\n    this.camera.position.set(0, 5, 10)\n    this.camera.lookAt(0, 0, 0)\n  }\n\n  setupLights() {\n    // Ambient light for underwater ambience\n    const ambientLight = new THREE.AmbientLight(0x404080, 0.4)\n    this.scene.add(ambientLight)\n\n    // Directional light simulating filtered sunlight\n    const directionalLight = new THREE.DirectionalLight(0x87ceeb, 0.8)\n    directionalLight.position.set(0, 50, 0)\n    directionalLight.castShadow = true\n    directionalLight.shadow.mapSize.width = 2048\n    directionalLight.shadow.mapSize.height = 2048\n    this.scene.add(directionalLight)\n  }\n\n  createUnderwaterEnvironment() {\n    // Create ocean floor\n    const floorGeometry = new THREE.PlaneGeometry(100, 100)\n    const floorMaterial = new THREE.MeshLambertMaterial({ color: 0x8b4513 })\n    const floor = new THREE.Mesh(floorGeometry, floorMaterial)\n    floor.rotation.x = -Math.PI / 2\n    floor.position.y = -5\n    floor.receiveShadow = true\n    this.scene.add(floor)\n\n    // Add some basic coral/rocks\n    for (let i = 0; i < 10; i++) {\n      const geometry = new THREE.SphereGeometry(0.5 + Math.random() * 1.5)\n      const material = new THREE.MeshLambertMaterial({\n        color: new THREE.Color().setHSL(Math.random() * 0.3, 0.7, 0.5),\n      })\n      const coral = new THREE.Mesh(geometry, material)\n      coral.position.set(\n        (Math.random() - 0.5) * 80,\n        -4 + Math.random() * 2,\n        (Math.random() - 0.5) * 80\n      )\n      coral.castShadow = true\n      this.scene.add(coral)\n    }\n  }\n\n  createPlayer() {\n    // Simple player representation (will be replaced with proper model)\n    const playerGeometry = new THREE.CapsuleGeometry(0.5, 1.5)\n    const playerMaterial = new THREE.MeshLambertMaterial({ color: 0x00ff88 })\n    this.player = new THREE.Mesh(playerGeometry, playerMaterial)\n    this.player.position.set(0, 0, 0)\n    this.player.castShadow = true\n    this.scene.add(this.player)\n  }\n\n  createSampleStars() {\n    this.stars = []\n\n    // Create glowing star collectibles\n    for (let i = 0; i < 5; i++) {\n      const starGeometry = new THREE.SphereGeometry(0.3)\n      const starMaterial = new THREE.MeshLambertMaterial({\n        color: 0xffd700,\n        emissive: 0xffd700,\n        emissiveIntensity: 0.3,\n      })\n\n      const star = new THREE.Mesh(starGeometry, starMaterial)\n      star.position.set(\n        (Math.random() - 0.5) * 20,\n        Math.random() * 8 - 2,\n        (Math.random() - 0.5) * 20\n      )\n\n      // Add simple rotation animation\n      star.userData = { rotationSpeed: 0.02 + Math.random() * 0.02 }\n\n      this.stars.push(star)\n      this.scene.add(star)\n    }\n  }\n\n  setupEventListeners() {\n    // Handle window resize\n    window.addEventListener('resize', () => this.onWindowResize())\n\n    // Basic movement controls (placeholder)\n    window.addEventListener('keydown', event => this.onKeyDown(event))\n\n    // Touch controls for mobile (placeholder)\n    if (this.isMobile) {\n      this.setupTouchControls()\n    }\n  }\n\n  setupTouchControls() {\n    // Placeholder touch control setup\n    this.canvas.addEventListener('touchstart', event => {\n      event.preventDefault()\n      // Touch control logic will be implemented here\n    })\n\n    this.canvas.addEventListener('touchmove', event => {\n      event.preventDefault()\n      // Touch movement logic will be implemented here\n    })\n  }\n\n  onWindowResize() {\n    this.camera.aspect = window.innerWidth / window.innerHeight\n    this.camera.updateProjectionMatrix()\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n  }\n\n  onKeyDown(event) {\n    // Basic movement controls (placeholder)\n    const moveSpeed = 0.2\n\n    switch (event.code) {\n      case 'ArrowUp':\n      case 'KeyW':\n        this.player.position.z -= moveSpeed\n        break\n      case 'ArrowDown':\n      case 'KeyS':\n        this.player.position.z += moveSpeed\n        break\n      case 'ArrowLeft':\n      case 'KeyA':\n        this.player.position.x -= moveSpeed\n        break\n      case 'ArrowRight':\n      case 'KeyD':\n        this.player.position.x += moveSpeed\n        break\n      case 'Space':\n        this.player.position.y += moveSpeed * 0.5\n        break\n      case 'ShiftLeft':\n        this.player.position.y -= moveSpeed * 0.5\n        break\n    }\n\n    // Update camera to follow player\n    this.updateCamera()\n  }\n\n  updateCamera() {\n    // Simple camera follow logic (will be improved)\n    const offset = new THREE.Vector3(0, 5, 10)\n    const targetPosition = this.player.position.clone().add(offset)\n    this.camera.position.lerp(targetPosition, 0.1)\n    this.camera.lookAt(this.player.position)\n  }\n\n  startGameLoop() {\n    const animate = () => {\n      requestAnimationFrame(animate)\n      this.update()\n      this.render()\n    }\n    animate()\n  }\n\n  update() {\n    if (!this.isLoaded) {\n      return\n    }\n\n    // Animate stars\n    this.stars.forEach(star => {\n      star.rotation.y += star.userData.rotationSpeed\n      star.rotation.x += star.userData.rotationSpeed * 0.5\n    })\n\n    // Check star collection (simple distance check)\n    this.checkStarCollection()\n  }\n\n  checkStarCollection() {\n    this.stars.forEach((star, index) => {\n      const distance = this.player.position.distanceTo(star.position)\n      if (distance < 1.0) {\n        // Collect star\n        this.scene.remove(star)\n        this.stars.splice(index, 1)\n        this.starCount++\n        this.updateUI()\n\n        console.log(`‚≠ê Star collected! Total: ${this.starCount}`)\n\n        // Check if level is complete\n        if (this.stars.length === 0) {\n          this.levelComplete()\n        }\n      }\n    })\n  }\n\n  levelComplete() {\n    console.log('üéâ Level Complete!')\n    this.levelNumber++\n    // Reset level with new stars\n    this.createSampleStars()\n    this.updateUI()\n  }\n\n  updateUI() {\n    document.getElementById('starCount').textContent = this.starCount\n    document.getElementById('levelNumber').textContent = this.levelNumber\n  }\n\n  render() {\n    if (this.renderer && this.scene && this.camera) {\n      this.renderer.render(this.scene, this.camera)\n    }\n  }\n\n  hideLoading() {\n    const loadingElement = document.getElementById(CONFIG.loadingId)\n    if (loadingElement) {\n      loadingElement.classList.add('hidden')\n    }\n  }\n\n  showUI() {\n    const uiElement = document.getElementById(CONFIG.uiId)\n    if (uiElement) {\n      uiElement.classList.remove('hidden')\n    }\n    this.updateUI()\n  }\n\n  detectMobile() {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      navigator.userAgent\n    )\n  }\n}\n\n// Initialize the game when the page loads\nwindow.addEventListener('DOMContentLoaded', async () => {\n  const game = new OceanAdventure()\n  await game.initialize()\n})\n\n// Handle WebGL context loss\nwindow.addEventListener('webglcontextlost', event => {\n  event.preventDefault()\n  console.warn('WebGL context lost')\n})\n\nwindow.addEventListener('webglcontextrestored', () => {\n  console.log('WebGL context restored')\n  // Reinitialize game here if needed\n})\n"],"names":["CONFIG","OceanAdventure","constructor","this","scene","camera","renderer","canvas","isLoaded","isMobile","detectMobile","starCount","levelNumber","console","log","initialize","setupCanvas","setupRenderer","setupScene","setupCamera","setupLights","setupEventListeners","hideLoading","showUI","startGameLoop","error","document","getElementById","Error","THREE.WebGLRenderer","antialias","alpha","setSize","window","innerWidth","innerHeight","setPixelRatio","Math","min","devicePixelRatio","setClearColor","shadowMap","enabled","type","THREE.PCFSoftShadowMap","THREE.Scene","createUnderwaterEnvironment","createPlayer","createSampleStars","THREE.PerspectiveCamera","position","set","lookAt","ambientLight","THREE.AmbientLight","add","directionalLight","THREE.DirectionalLight","castShadow","shadow","mapSize","width","height","floorGeometry","THREE.PlaneGeometry","floorMaterial","THREE.MeshLambertMaterial","color","floor","THREE.Mesh","rotation","x","PI","y","receiveShadow","i","geometry","THREE.SphereGeometry","random","material","THREE.Color","setHSL","coral","playerGeometry","THREE.CapsuleGeometry","playerMaterial","player","stars","starGeometry","starMaterial","emissive","emissiveIntensity","star","userData","rotationSpeed","push","addEventListener","onWindowResize","event","onKeyDown","setupTouchControls","preventDefault","aspect","updateProjectionMatrix","moveSpeed","code","z","updateCamera","offset","THREE.Vector3","targetPosition","clone","lerp","animate","requestAnimationFrame","update","render","forEach","checkStarCollection","index","distanceTo","remove","splice","updateUI","length","levelComplete","textContent","loadingElement","classList","uiElement","test","navigator","userAgent","async","game","warn"],"mappings":"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"}