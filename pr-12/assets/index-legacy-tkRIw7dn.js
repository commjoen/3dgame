System.register(["./three-legacy-Cqe1lxw8.js"],function(e,t){"use strict";var s,i,n,a,o,r,h,d,c,l,p,w,u;return{setters:[e=>{s=e.W,i=e.P,n=e.S,a=e.a,o=e.A,r=e.D,h=e.b,d=e.M,c=e.c,l=e.d,p=e.C,w=e.e,u=e.V}],execute:function(){const e="gameCanvas",t="loading",m="ui";class v{constructor(){this.scene=null,this.camera=null,this.renderer=null,this.canvas=null,this.isLoaded=!1,this.isMobile=this.detectMobile(),this.starCount=0,this.levelNumber=1,console.log("üåä Ocean Adventure - Initializing...")}async initialize(){try{this.setupCanvas(),this.setupRenderer(),this.setupScene(),this.setupCamera(),this.setupLights(),this.setupEventListeners(),this.hideLoading(),this.showUI(),this.startGameLoop(),this.isLoaded=!0,console.log("üéÆ Ocean Adventure - Ready to play!")}catch(e){console.error("‚ùå Failed to initialize game:",e)}}setupCanvas(){if(this.canvas=document.getElementById(e),!this.canvas)throw new Error("Game canvas not found")}setupRenderer(){this.renderer=new s({canvas:this.canvas,antialias:!this.isMobile,alpha:!1}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setClearColor(4386,1),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=i}setupScene(){this.scene=new n,this.createUnderwaterEnvironment(),this.createPlayer(),this.createSampleStars()}setupCamera(){this.camera=new a(75,window.innerWidth/window.innerHeight,.1,1e3),this.camera.position.set(0,5,10),this.camera.lookAt(0,0,0)}setupLights(){const e=new o(4210816,.4);this.scene.add(e);const t=new r(8900331,.8);t.position.set(0,50,0),t.castShadow=!0,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,this.scene.add(t)}createUnderwaterEnvironment(){const e=new h(100,100),t=new d({color:9127187}),s=new c(e,t);s.rotation.x=-Math.PI/2,s.position.y=-5,s.receiveShadow=!0,this.scene.add(s);for(let i=0;i<10;i++){const e=new l(.5+1.5*Math.random()),t=new d({color:(new p).setHSL(.3*Math.random(),.7,.5)}),s=new c(e,t);s.position.set(80*(Math.random()-.5),2*Math.random()-4,80*(Math.random()-.5)),s.castShadow=!0,this.scene.add(s)}}createPlayer(){const e=new w(.5,1.5),t=new d({color:65416});this.player=new c(e,t),this.player.position.set(0,0,0),this.player.castShadow=!0,this.scene.add(this.player)}createSampleStars(){this.stars=[];for(let e=0;e<5;e++){const e=new l(.3),t=new d({color:16766720,emissive:16766720,emissiveIntensity:.3}),s=new c(e,t);s.position.set(20*(Math.random()-.5),8*Math.random()-2,20*(Math.random()-.5)),s.userData={rotationSpeed:.02+.02*Math.random()},this.stars.push(s),this.scene.add(s)}}setupEventListeners(){window.addEventListener("resize",()=>this.onWindowResize()),window.addEventListener("keydown",e=>this.onKeyDown(e)),this.isMobile&&this.setupTouchControls()}setupTouchControls(){this.canvas.addEventListener("touchstart",e=>{e.preventDefault()}),this.canvas.addEventListener("touchmove",e=>{e.preventDefault()})}onWindowResize(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}onKeyDown(e){const t=.2;switch(e.code){case"ArrowUp":case"KeyW":this.player.position.z-=t;break;case"ArrowDown":case"KeyS":this.player.position.z+=t;break;case"ArrowLeft":case"KeyA":this.player.position.x-=t;break;case"ArrowRight":case"KeyD":this.player.position.x+=t;break;case"Space":this.player.position.y+=.1;break;case"ShiftLeft":this.player.position.y-=.1}this.updateCamera()}updateCamera(){const e=new u(0,5,10),t=this.player.position.clone().add(e);this.camera.position.lerp(t,.1),this.camera.lookAt(this.player.position)}startGameLoop(){const e=()=>{requestAnimationFrame(e),this.update(),this.render()};e()}update(){this.isLoaded&&(this.stars.forEach(e=>{e.rotation.y+=e.userData.rotationSpeed,e.rotation.x+=.5*e.userData.rotationSpeed}),this.checkStarCollection())}checkStarCollection(){this.stars.forEach((e,t)=>{this.player.position.distanceTo(e.position)<1&&(this.scene.remove(e),this.stars.splice(t,1),this.starCount++,this.updateUI(),console.log(`‚≠ê Star collected! Total: ${this.starCount}`),0===this.stars.length&&this.levelComplete())})}levelComplete(){console.log("üéâ Level Complete!"),this.levelNumber++,this.createSampleStars(),this.updateUI()}updateUI(){document.getElementById("starCount").textContent=this.starCount,document.getElementById("levelNumber").textContent=this.levelNumber}render(){this.renderer&&this.scene&&this.camera&&this.renderer.render(this.scene,this.camera)}hideLoading(){const e=document.getElementById(t);e&&e.classList.add("hidden")}showUI(){const e=document.getElementById(m);e&&e.classList.remove("hidden"),this.updateUI()}detectMobile(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}window.addEventListener("DOMContentLoaded",async()=>{const e=new v;await e.initialize()}),window.addEventListener("webglcontextlost",e=>{e.preventDefault(),console.warn("WebGL context lost")}),window.addEventListener("webglcontextrestored",()=>{console.log("WebGL context restored")})}}});
//# sourceMappingURL=index-legacy-tkRIw7dn.js.map
